<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Review Payment</title>
  <!-- Tailwind CSS (your compiled CSS) -->
  <link rel="stylesheet" href="src/output.css">
  
  <link rel="shortcut icon" href="https://www.paypalobjects.com/en_US/i/icon/pp_favicon_x.ico">
  <link rel="apple-touch-icon" href="https://www.paypalobjects.com/webstatic/icon/pp64.png">
  <link rel="canonical" href="https://www.paypal.com/eg/signin">
  <!-- Font Awesome for icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  
  <style>
    /* Extra styling for read-only numeric input (the custom decimal logic) */
    input[readonly] {
      cursor: text;
    }
  </style>
</head>
<body class="bg-white text-gray-800 flex flex-col" style="min-height: 100vh;">

  <!-- Header -->
  <header class="font-sans relative z-50">
    <!-- Top Bar -->
    <div class="bg-[#142c8e] text-white flex justify-center shadow-[rgba(0,0,0,0.1)_-4px_9px_25px_-6px] py-4 min-h-[75px] tracking-wide">
      <div class="flex flex-wrap items-center justify-between w-[70%]">
        <!-- Logo -->
        <a href="javascript:void(0)">
          <img src="./images/logo.svg" alt="logo" width="30" />
        </a>

        <!-- Collapsible Menu (for mobile) -->
        <div
          id="collapseMenu"
          class="lg:ml-12 max-lg:hidden lg:!block
                 max-lg:before:fixed max-lg:before:bg-black max-lg:before:opacity-40
                 max-lg:before:inset-0 max-lg:before:z-50"
        >
          <!-- Close Button (shows on mobile) -->
          <button
            id="toggleClose"
            class="lg:hidden fixed top-2 right-4 z-[100]
                   rounded-full bg-white w-9 h-9 flex items-center
                   justify-center border"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="w-3.5 h-3.5 fill-[#000]"
              viewBox="0 0 320.591 320.591"
            >
              <path
                d="M30.391 318.583a30.37 30.37 0 0 1-21.56-7.288c-11.774-11.844-11.774-30.973 
                   0-42.817L266.643 10.665c12.246-11.459 31.462-10.822 42.921 1.424 10.362 11.074 
                   10.966 28.095 1.414 39.875L51.647 311.295a30.366 30.366 0 0 1-21.256 7.288z"
              ></path>
              <path
                d="M287.9 318.583a30.37 30.37 0 0 1-21.257-8.806L8.83 51.963C-2.078 39.225
                   -.595 20.055 12.143 9.146c11.369-9.736 28.136-9.736 39.504 0l259.331 257.813
                   c12.243 11.462 12.876 30.679 1.414 42.922-.456.487-.927.958-1.414 1.414
                   a30.368 30.368 0 0 1-23.078 7.288z"
              ></path>
            </svg>
          </button>

          <!-- Main Nav Items -->
          <ul
            class="lg:flex max-lg:space-y-4
                   max-lg:fixed bg-[#142c8e] max-lg:w-2/3
                   max-lg:min-w-[300px] max-lg:top-0 max-lg:left-0
                   max-lg:p-4 max-lg:h-full max-lg:shadow-md
                   max-lg:overflow-auto z-50 text-white"
          >
            <!-- Mobile logo (hidden on desktop) -->
            <li class="lg:hidden">
              <a href="javascript:void(0)">
                <img src="./images/logo.svg" alt="logo" width="40"/>
              </a>
            </li>
            <!-- Nav Items -->
            <li class="my-[5px] py-4 bg-[#142c8e] rounded-full border border-transparent transition-all duration-300 ease-in-out hover:border-[#d1f1ff1a]">
              <a href="javascript:void(0)" class="block font-semibold text-[#d1f1ff] px-4">
                Home
              </a>
            </li>
            <li class="my-[5px] flex py-4 border-[#142c8e] rounded-full border bg-[#d1f1ff1a] transition-all duration-300 ease-in-out">
              <a href="javascript:void(0)" class="block font-semibold text-[#fff] px-4">
                Send
              </a>
            </li>
            <li class="my-[5px] py-4 bg-[#142c8e] rounded-full border border-transparent transition-all duration-300 ease-in-out hover:border-[#d1f1ff1a]">
              <a href="javascript:void(0)" class="block font-semibold text-[#d1f1ff] px-4">
                Wallet
              </a>
            </li>
            <li class="my-[5px] py-4 bg-[#142c8e] rounded-full border border-transparent transition-all duration-300 ease-in-out hover:border-[#d1f1ff1a]">
              <a href="javascript:void(0)" class="block font-semibold text-[#d1f1ff] px-4">
                Activity
              </a>
            </li>
            <li class="my-[5px] py-4 bg-[#142c8e] rounded-full border border-transparent transition-all duration-300 ease-in-out hover:border-[#d1f1ff1a]">
              <a href="javascript:void(0)" class="block font-semibold text-[#d1f1ff] px-4">
                Help
              </a>
            </li>
            <li class="my-[5px] py-4 bg-[#142c8e] rounded-full border border-transparent transition-all duration-300 ease-in-out hover:border-[#d1f1ff1a]">
              <a href="javascript:void(0)" class="block font-semibold text-[#d1f1ff] px-4">
                More
              </a>
            </li>
          </ul>
        </div>

        <!-- Right side (desktop only) -->
        <div class="hidden lg:flex ml-auto items-center gap-4">
          <button>
            <i class="fa-solid fa-bell text-[#d1f1ff]"></i>
          </button>
          <button>
            <i class="fa-solid fa-gear text-[#d1f1ff]"></i>
          </button>
          <a href="javascript:void(0)" class="hover:underline font-semibold text-[#d1f1ff]">
            LOG OUT
          </a>
        </div>

        <!-- Mobile Menu Open Button -->
        <div id="toggleOpen" class="flex ml-auto lg:hidden bg-[#142c8e]">
          <button>
            <svg
              class="w-7 h-7 text-white"
              fill="currentColor"
              viewBox="0 0 20 20"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                d="M3 5a1 1 0 011-1h12a1 1 0
                   110 2H4a1 1 0 01-1-1zM3 10a1 1 0
                   011-1h12a1 1 0 110 2H4a1 1 0
                   01-1-1zM3 15a1 1 0 011-1h12a1
                   1 0 110 2H4a1 1 0 01-1-1z"
                clip-rule="evenodd"
              ></path>
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- SUB NAV BAR -->
    
  </header>

  <!-- Main Content (No subnav) -->
  <main class="flex-1 flex flex-col items-center justify-center px-4 py-8 bg-white">
    <div class="w-full max-w-md bg-white border rounded-md shadow-sm px-6 py-2 my-2 text-center ">
      <div class="flex justify-center h-24 " style="align-items: center;">
      <div class="w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center mb-2 me-4">
        <i class="fa-solid fa-user text-gray-400 text-3xl"></i>
      </div>
      <div class="flex flex-col items-start mb-4">
        <!-- Avatar (placeholder) -->
        
        <!-- Name / Handle -->
        <h2 class="text-xl font-semibold text-gray-800" id="displayUsername">Amr Mostafa</h2>
        <p class="text-sm text-gray-500" id="displayEmail">@amrmostafa</p>
      </div>
    </div>

      <!-- Amount with custom decimal logic -->
      
      <div class="flex flex-row justify-between my-4">
        <div class="mb-4">
          <input
            type="text"
            id="amountInput"
            style="direction: ltr; text-align: left;"
            class="text-3xl font-bold w-full focus:outline-none bg-transparent"
            value="00.00"
          />
        </div>
        <!-- Currency Dropdown -->
        <select class="border border-gray-300 rounded-full px-3 py-2 text-sm focus:outline-none focus:border-blue-600">
          <option value="USD">USD</option>
          <option value="EUR">EUR</option>
          <option value="EGP">EGP</option>
          <!-- Add more currencies if needed -->
        </select>
      </div>

      <!-- Terms text -->
      
    </div>
    <!-- Payment Card -->
    <div class="w-full max-w-md bg-white border rounded-md shadow-sm p-6 text-center">
      <!-- First row: Amount (left) + User Info (right) -->
      
  
      <!-- Preferred Source & Payment Type -->
      <div class="border rounded p-3 mb-3 text-left">
        <div class="flex items-center justify-between mb-2">
          <span class="text-sm font-semibold text-gray-700">Preferred Source:</span>
          <span class="text-sm text-[#142c8e] font-medium">PayPal Balance (USD)</span>
        </div>
        <div class="border-t pt-2 text-sm text-gray-700 font-medium">
          Payment for goods and services
        </div>
      </div>
  
      <!-- Buyer Protection Note -->
      <p class="text-xs text-gray-500 mb-4">
        Your eligible purchases may be covered by our 
        <a href="#" class="text-blue-600 hover:underline">Buyer Protection</a>.
      </p>
  
      <!-- Shipping Address -->
      <div class="bg-gray-50 border rounded p-3 mb-4 text-left text-sm text-gray-600">
        <p class="font-semibold mb-1">Your shipping addresses</p>
        
      </div>
  
      <!-- Fees & Totals -->
      <div class="border rounded p-3 mb-4 text-left text-sm text-gray-700">
        <div class="flex items-center justify-between mb-1">
          <span>PayPal Fee</span>
          <span>$0.00 USD</span>
        </div>
        <div class="flex items-center justify-between mb-1">
          <span>Subtotal</span>
          <span>$0.01 USD</span>
        </div>
        <div class="flex items-center justify-between mb-1">
          <span>Estimated delivery date</span>
          <span>March 29, 2025</span>
        </div>
        <hr class="my-2"/>
        <div class="flex items-center justify-between font-semibold">
          <span>Total</span>
          <span>$0.01 USD</span>
        </div>
      </div>
      
    </div>
    <p class="text-xs text-gray-400 mb-6 text-center mt-4">
      For your security, we may review this payment.
      <br/>
      <a href="#" class="text-blue-600 hover:underline">Terms and Conditions</a>
    </p>

    <!-- Buttons -->
    <div>
      <button onclick="move()" class="bg-black w-64 sm:w-96 text-white font-semibold px-6 py-2 rounded hover:bg-gray-900">
        Send
      </button>
    </div>
    <a href="index.html" class="text-md text-blue-600 underline font-semibold">
      Cancel
    </a>
  </main>
  

  <!-- Footer -->
  <footer class="mt-8 bg-white border-t">
    <div class="max-w-7xl mx-auto px-4 py-6 text-sm text-gray-600">
      <!-- Top row: Logo on the left, links on the right -->
      <div class="bg-white border-b py-3 px-4">
        <div class="flex flex-col md:flex-row items-center justify-start max-w-7xl mx-auto">
          <!-- Logo -->
          <div>
            <img
              src="./images/logo3.png"
              alt="My Logo"
              style="width: 7rem;height: 8.5rem;"
              class="h-10"
            />
          </div>
      
          <!-- Nav Links -->
          <nav class="flex gap-4 mx-4 mt-2 md:mt-0 text-sm text-gray-600">
            <a href="javascript:void(0)" class="hover:underline text-lg font-bold">Help</a>
            <a href="javascript:void(0)" class="hover:underline text-lg font-bold">Contact Us</a>
            <a href="javascript:void(0)" class="hover:underline text-lg font-bold">Security</a>
          </nav>
        </div>
      </div>
      
      <!-- Disclaimers -->
      <div class="text-gray-500 mt-4 text-md">
        <p class="text-md font-semibold">
          © 1999–2025 PayPal. All rights reserved.
          <a href="#" class="hover:underline font-normal text-black">Privacy</a>
          <span class="mx-1">|</span>
          <a href="#" class="hover:underline font-normal text-black">Cookies</a>
          <span class="mx-1">|</span>
          <a href="#" class="hover:underline font-normal text-black">Legal</a>
        </p>
        <p class="text-md font-semibold mt-4">
          PayPal Pte. Ltd. is licensed by the Monetary Authority of Singapore as a Major
          Payment Institution under the Payment Services Act 2019.
        </p>
      </div>
    </div>
  </footer>

  <!-- Script for custom decimal logic -->
  <script>
    // The user wants "00.00" -> press '1' => "00.01", press '3' => "00.13", etc.
    let rawValue = "";
    const amountInput = document.getElementById("amountInput");

    // Listen for keydown on the entire window (or you can attach to the input)
    document.getElementById("amountInput").addEventListener("keydown", (e) => {
      // If the user is typing digits or backspace, handle it:
      if (e.key === "Backspace") {
        // Remove last digit
        rawValue = rawValue.slice(0, -1);
        e.preventDefault();
      } else if (/^\d$/.test(e.key)) {
        // Append digit
        rawValue += e.key;
        e.preventDefault();
      } else {
        // Ignore all other keys
        return;
      }
      updateAmount();
    });
    function move() {
      // Get the entered amount (remove any non-digit/decimal characters)
      const amountValue = parseFloat(document.getElementById('amountInput').value.replace(/[^0-9.]/g, ''));
      
      // Retrieve stored balance from localStorage (assumed to be stored as a number in string format)
      const storedBalanceStr = localStorage.getItem("paypalBalance") || "0";
      const storedBalance = parseFloat(storedBalanceStr);
      
      if (amountValue <= storedBalance) {
        // Subtract the amount from the stored balance
        const newBalance = storedBalance - amountValue;
        localStorage.setItem("paypalBalance", newBalance.toFixed(2));
        // Redirect to confirm page with query parameters
        window.location.href = `./conf.html?email=${encodeURIComponent(document.getElementById('displayEmail').innerText)}&username=${encodeURIComponent(document.getElementById('displayUsername').innerText)}&amount=${encodeURIComponent(document.getElementById('amountInput').value)}`;
      } else {
        // Show error using SweetAlert2
        Swal.fire({
          icon: 'error',
          title: 'Insufficient Funds',
          text: 'The entered amount exceeds your available balance.',
        });
      }
    }
    function updateAmount() {
      if (rawValue === "") {
        amountInput.value = "00.00";
        return;
      }
      // Convert rawValue to integer
      let intVal = parseInt(rawValue, 10);
      // decimal = intVal / 100 => last two digits are decimal part
      let decimal = intVal / 100;
      // Format with at least 2 decimals
      let formatted = decimal.toFixed(2);
      // The user wants leading zeros so that if it's < 1, it shows 00.xx
      if (decimal < 10) {
        formatted =  formatted; // ensures at least one leading zero
      }
      if (decimal < 1) {
        formatted = "0" + formatted; // ensures two leading zeros if < 1
      }
      amountInput.value = formatted;
    }
    var toggleOpen = document.getElementById('toggleOpen');
    var toggleClose = document.getElementById('toggleClose');
    var collapseMenu = document.getElementById('collapseMenu');

    function handleClick() {
      if (collapseMenu.style.display === 'block') {
        collapseMenu.style.display = 'none';
      } else {
        collapseMenu.style.display = 'block';
      }
    }

    if (toggleOpen)  toggleOpen.addEventListener('click', handleClick);
    if (toggleClose) toggleClose.addEventListener('click', handleClick);
    const params = new URLSearchParams(window.location.search);
const username = params.get("username");
const email = params.get("email");
const amount = params.get("amount");

document.getElementById('displayUsername').innerText = username;
document.getElementById('displayEmail').innerText = email;
document.getElementById('amountInput').value = amount;
  </script>
</body>
</html>
